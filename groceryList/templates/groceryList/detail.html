{% extends "base.html" %}

{% block content %}

<article id="small-panel">
    <header>
        <h3>{{ grocerylist.name }}</h3>
    </header>

    <ul>
    {% for fooditem in grocerylist.fooditems.all %}
        <li>{{ fooditem.quantity }} {{ fooditem.name }} on your grocery list</li>
    {% endfor %}
    </ul>

    <ul>
    {% for recipe in grocerylist.recipes.all %}
        <li> {{ recipe.name }} on your grocery list; contains - </li>
        <ul>
        {% if recipe.fooditems.all %}
            {% for fooditem in recipe.fooditems.all %}
                    <li>{{ fooditem.quantity }} {{ fooditem.name }} </li>
            {% endfor %}
        {% else %}
        <p>No ingredients</p>
        {% endif %}
        </ul>
    {% endfor %}
    </ul>

    {% if messages %}
    <ul class="messages">
        {% for message in messages %}
            <strong>
            <p{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}
            </p></strong>
        {% endfor %}
    </ul>
    {% endif %}

    <form action="{% url 'groceryList:add_to_list' pk=grocerylist.id %}" method="post">
    {% csrf_token %}
        {{ item_form }} <br>
        <input type="submit" value="Submit" />
    </form>


    <form action="{% url 'groceryList:add_recipe_to_list' pk=grocerylist.id %}" method="post">
    {% csrf_token %}
        {{ recipe_form }} <br>
        <input type="submit" value="Submit" />
    </form>


    <a href="{% url 'groceryList:index' %}">View all grocery lists</a>










    <script>/*

    <form action="{% url 'groceryList:add_to_list' pk=grocerylist.id %}" method="post">
        {% csrf_token %}
        <div>
            <label for="food_item">Add an item to your grocery list:</label>
            <input id="food_item" type="text" name="food_item" /> <br>
        </div>
        <div class="button">
            <button type="submit">Submit</button>
        </div>
    </form>

    */</script>

</article>

{% endblock %}